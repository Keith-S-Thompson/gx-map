# $Id: bug-0082,v 1.1 2006-04-07 20:32:56-07 kst Exp $
# $Source: /home/kst/gx-map-redacted/bugs/bug-0082,v $

gx-map bug 0082
Date: Fri 2006-04-07
Severity: med
Reported by: Keith Thompson <kst@sdsc.edu>
Version: 0.5.0e8
Status: Open
Title: gx-request doesn't use default user certificate

Summary:
The "-long-help" message for gx-request says:

    -certificate-file file  : Name of file from which to extract DN.
                              If neither "-dn", "-proxy", nor
                              "-certificate-file" is specified,
                              extract DN from $X509_USER_CERT or
                              $HOME/.globus/usercert.pem .

and the man page says:

     -certificate-file file
         Extract the distinguished name from the specified X509
         certificate file.

         If none of "-dn", "-proxy", or "-certificate-file" is
         specified, the distinguished name (if needed) is
         extracted from $X509_USER_CERT or
         $HOME/.globus/usercert.pem.

In fact, the user's default certificate file ($X509_USER_CERT or
$HOME/.globus/usercert.pem) is used only in interactive mode.

Proposed fix:
Ideally, I'd like the argument to the "-certificate-file" option to
be optional, but that's not practical.

Add another option, "-my-certificate", to specify the user's
default certificate.

And add yet another option, "-default-dn" that's equivalent to
"-proxy" if a proxy exists, or to "-my-certificate" if it doesn't.
In fact, consider dropping the "-proxy" and "-my-certificate" options
altogether, and using just "-default-dn"; you can always specify a
certificate file my name anyway (K.I.S.S.).

The simplest usage would then be:
    gx-request -add -default-dn
which could be recommended for most users rather than interactive mode.
